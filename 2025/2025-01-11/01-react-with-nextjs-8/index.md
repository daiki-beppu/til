---
date: 2025-01-11 08:51
title: react-with-nextjs-8
number: 01
labels: [react]
topics: [js/]
---

### å†…å®¹

State ã®ãƒªãƒ•ãƒˆã‚¢ãƒƒãƒ—ã«ã¤ã„ã¦

ãƒšãƒ¼ã‚¸é–“ã®çŠ¶æ…‹ã‚’å…±é€šåŒ–ã™ã‚‹(Next.js ã®ã¿

`_app.js` ã§å…±é€šåŒ–ã—ã¦ `props` ã§ã“ãƒšãƒ¼ã‚¸ã«æ¸¡ã™ã“ã¨ã§ãƒšãƒ¼ã‚¸é–“ã®å…±é€šåŒ–ãŒå¯èƒ½

<details>
<summary>ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰(ã‚¯ãƒªãƒƒã‚¯ã§é–‹ã)</summary>

```jsx
// _app.js

/* eslint-disable react/prop-types */ x;
import 'src/styles/globals.css';

import { Geist, Geist_Mono } from 'next/font/google';
import Head from 'next/head';
import { useCounter } from 'src/hooks/useCounter';
import { useInput } from 'src/hooks/useInput';
import { useSetBgColor } from 'src/hooks/useSetBgColor';
import styles from 'src/styles/Home.module.css';

const geistSans = Geist({
  variable: '--font-geist-sans',
  subsets: ['latin'],
});

const geistMono = Geist_Mono({
  variable: '--font-geist-mono',
  subsets: ['latin'],
});

export default function App({ Component, pageProps }) {
  const counter = useCounter();
  const input = useInput();
  useSetBgColor();
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <div
        className={`${styles.page} ${geistSans.variable} ${geistMono.variable}`}
      >
        {/*
        ã“ã“ã§ å­ãƒšãƒ¼ã‚¸ã«æ¸¡ã™ ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§
        count={count} ã¨ã„ã†ã‚ˆã†ã«ä¸€ã¤ãšã¤è¨˜è¿°ã—ãªãã¦è‰¯ããªã‚‹
        */}
        <Component {...pageProps} {...counter} {...input} />
      </div>
    </>
  );
}
```

å—ã‘å–ã‚‹æ–¹ã®è¨˜è¿°ã¯ 3 ãƒ‘ã‚¿ãƒ¼ãƒ³

- ãƒ‰ãƒƒãƒˆè¨˜æ³•ã§è¨˜è¿°ã™ã‚‹æ–¹æ³•
- å¼•æ•°æ™‚ç‚¹ã§åˆ†å‰²ä»£å…¥ã™ã‚‹æ–¹æ³•
- props ã‚’åˆ†å‰²ä»£å…¥ã™ã‚‹æ–¹æ³•

å€‹äººçš„ã«ã¯ ãƒ‰ãƒƒãƒˆè¨˜æ³•ã§è¨˜è¿°ã™ã‚‹æ–¹æ³•ãŒå¥½ã
ç†ç”±ã¯ã²ã¨ç›®ã§è¦ªã‹ã‚‰æ¸¡ã£ã¦ããŸã‚‚ã®ã ã¨ã„ã†ã®ãŒã‚ã‹ã‚‹ã‹ã‚‰
ãŸã ã€å†—é•·ãªè¨˜è¿°ã«ã¯ãªã‚‹

```jsx
// ãƒ‰ãƒƒãƒˆè¨˜æ³•
import Footer from 'src/components/Footer';
import Header from 'src/components/Header';
import Main from 'src/components/Main';
import styles from 'src/components/Main/Main.module.css';

export default function Home(props) {
  return (
    <>
      <Header />
      <main className={styles.main}>
        {props.isView ? <h1>{props.count}</h1> : null}
        <button onClick={props.handleView}>
          {props.isView ? 'éè¡¨ç¤º' : 'è¡¨ç¤º'}
        </button>
        <button onClick={props.handleClick}>ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†</button>

        <input type="text" value={props.text} onChange={props.handleChange} />
        <button onClick={props.handleAdd}>è¿½åŠ </button>
        <ul>
          {props.array.map((item) => {
            return <li key={item}>{item}</li>;
          })}
        </ul>
        <Main title="index" />
      </main>
      <Footer />
    </>
  );
}
```

```jsx
// å¼•æ•°æ™‚ç‚¹ã§åˆ†å‰²ä»£å…¥
import Footer from 'src/components/Footer';
import Header from 'src/components/Header';
import Main from 'src/components/Main';
import styles from 'src/components/Main/Main.module.css';

export default function Home({
  count,
  isView,
  handleClick,
  handleView,
  text,
  array,
  handleChange,
  handleAdd,
}) {
  return (
    <>
      <Header />
      <main className={styles.main}>
        {isView ? <h1>{count}</h1> : null}
        <button onClick={handleView}>{isView ? 'éè¡¨ç¤º' : 'è¡¨ç¤º'}</button>
        <button onClick={handleClick}>ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†</button>

        <input type="text" value={text} onChange={handleChange} />
        <button onClick={handleAdd}>è¿½åŠ </button>
        <ul>
          {array.map((item) => {
            return <li key={item}>{item}</li>;
          })}
        </ul>
        <Main title="index" />
      </main>
      <Footer />
    </>
  );
}
```

```jsx
// props ã‚’åˆ†å‰²ä»£å…¥ã™ã‚‹æ–¹æ³•
import Footer from 'src/components/Footer';
import Header from 'src/components/Header';
import Main from 'src/components/Main';
import styles from 'src/components/Main/Main.module.css';

export default function Home(props) {
  const {
    count,
    isView,
    handleClick,
    handleView,
    text,
    array,
    handleChange,
    handleAdd,
  } = props;
  return (
    <>
      <Header />
      <main className={styles.main}>
        {isView ? <h1>{count}</h1> : null}
        <button onClick={handleView}>{isView ? 'éè¡¨ç¤º' : 'è¡¨ç¤º'}</button>
        <button onClick={handleClick}>ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†</button>

        <input type="text" value={text} onChange={handleChange} />
        <button onClick={handleAdd}>è¿½åŠ </button>
        <ul>
          {array.map((item) => {
            return <li key={item}>{item}</li>;
          })}
        </ul>
        <Main title="index" />
      </main>
      <Footer />
    </>
  );
}
```

</details>

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ãƒªãƒ•ãƒˆã‚¢ãƒƒãƒ—ã«ã¤ã„ã¦

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§å…±é€šåŒ–ã—ãŸã„å ´åˆã¯
è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§å®šç¾©ã—ã¦ã‚ã’ã¦å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ¸¡ã™ã“ã¨ã§å¯èƒ½

<details>
<summary>ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰(ã‚¯ãƒªãƒƒã‚¯ã§é–‹ã)</summary>

å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§å®šç¾©ã—ã¦ã„ãŸ `ITEMS` ã‚’è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚ã‚‹
Main/index.jsx ã§å®šç¾©ã— `items` ã¨ã—ã¦ã‚¹ãƒ†ãƒ¼ãƒˆã‚’å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚ã‚‹ `Links`ã«æ¸¡ã™

```jsx
// Main/index.jsx (è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)
import { useCallback, useState } from 'react';
import Headline from 'src/components/Headline';
import Links from 'src/components/Links';
import styles from 'src/components/Main/Main.module.css';

const ITEMS = [
  {
    style: 'primary',
    href: 'https://vercel.com/new?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app',
    description: 'Deploy now',
  },
  {
    style: 'secondary',
    href: 'https://vercel.com/new?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app',
    description: 'Read our docs',
  },
];

export default function Main(props) {
  const [items, setItems] = useState(ITEMS);
  const handleReduce = useCallback(() => {
    setItems((prevItems) => {
      return prevItems.slice(0, prevItems.length - 1);
    });
  }, []);
  return (
    <div className={styles.main}>
      <Headline title={props.title} handleReduce={handleReduce} />
      <Links items={items} handleReduce={handleReduce} />
      <button onClick={handleReduce}>å‰Šé™¤</button>
    </div>
  );
}
```

å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå´ã§ã¯ `props` ã‚’å—ã‘å–ã£ã¦è¨˜è¿°ã‚’å¤‰æ›´ã™ã‚‹
ã“ã†ã™ã‚‹ã“ã¨ã§ `Main/index.jsx` ã§ã‚‚ `ITEMS` ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã§ãã‚‹ã—
åˆ¥ã®å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚ã‚‹ `Headline` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚‚åŒã˜ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã§ãã‚‹

```jsx
import styles from 'src/components/Links/Links.module.css';

export default function Links(props) {
  console.log(props.items);
  return (
    <div className={styles.ctas}>
      {props.items.map((item) => {
        return (
          <a
            key={item.href}
            className={`${styles[item.style]}`}
            href={item.href}
            target="_blank"
            rel="noopener noreferrer"
          >
            {item.description}
          </a>
        );
      })}
    </div>
  );
}
```

```jsx
import Image from 'next/image';
import styles from 'src/components/Headline/Headline.module.css';

export default function Headline(props) {
  console.log(props);
  return (
    <div className={styles.main}>
      <h1>{props.title} Page</h1>
      <Image
        className={styles.logo}
        src="/next.svg"
        alt="Next.js logo"
        width={180}
        height={38}
        priority
      />
      <ol>
        <li>
          Get started by editing <code>{props.title}.js</code>.
        </li>
        <li>Save and see your changes instantly.</li>
      </ol>
      <button onClick={props.handleReduce}>å‰Šé™¤</button>
    </div>
  );
}
```

</details>

### ãƒãƒã£ãŸãƒã‚¤ãƒ³ãƒˆ

## ğŸ” æ°—ã¥ããƒ»æ„Ÿæƒ³

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

## â­ï¸ æ¬¡ã«å­¦ã³ãŸã„ã“ã¨

## ğŸ“Œ é–¢é€£ã™ã‚‹éå»ã®å­¦ã³

---
